<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Reddit Post Grabber</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
</head>
<body class='bg-dark'>
<h1 class='text-center text-primary'>Top 5 Reddit posts of any given subreddit <i class="fab fa-reddit mt-3" style='font-size: 80px; display: block; color: red'></i></h1>
<p class="text-muted text-center">Please note that for now your options might be a bit partial to software!</p>
<div class="container selectContainer">
    <select class="custom-select w-50">
        <option selected disabled>Search for a sub!</option>
        <option value="javascript">/r/javascript</option>
        <option value="webdev">/r/webdev</option>
        <option value="learnjavascript">/r/learnjavascript</option>
        <option value="web_design">/r/web_design</option>
        <option value="softwaregore">/r/softwaregore</option>
        <option value="programmerhumor">/r/programmerhumor</option>
        <option value="reactjs">/r/reactjs</option>
      </select> <button id="poker-cat" class="btn btn-success mb-3 ml-3">poker-cat</button>
     
      <div class='filterButtons'>
        <label for="filter" class="text-light">Filter by post scores</label>
        <button class='btn btn-info filter' id='hundred' value="100">Score >= 100</button>
        <button class='btn btn-info filter' id='fifty' value="50">Score > 50</button>
        <button class='btn btn-info filter' id='twentyFive' value="25">Score > 25</button>
      </div>
       
      <div class="jumbotron bg-danger">
        <ul class="list-group">
          <li class="text-center"><img src="http://www.guzer.com/pictures/poker-cat.jpg" alt="poker-cat"></li>
          <li class="text-center">Pick a sub, any sub, but make it quick!"</li>
          
        </ul>
      </div>
</div>
  
<script>
  //html elements
const ul = document.querySelector('ul');
const select = document.querySelector('select');
const container = document.querySelector('.container');
const catButton = document.querySelector('#poker-cat');
const score100 = document.querySelector('#hundred');
const score50 = document.querySelector('#fifty');
const score25 = document.querySelector('#twentyFive');



//no functional significance
catButton.addEventListener('click', () => {
  ul.innerHTML = `<li class="text-center"><img src="http://www.guzer.com/pictures/poker-cat.jpg" alt="poker-cat"></li>
          <li class="text-center">"Pick a sub, any sub, but make it quick!"</li>`
});


//get top 5 posts (no filter)
const fetchTopFive = async sub => {
  const URL = `https://www.reddit.com/r/${sub}/top/.json?limit=5`;
  const fetchResult = fetch(URL);
  const response = await fetchResult;
  const jsonData = await response.json();
  const posts = jsonData.data.children;
  const content = posts.map((post, i) => (`<li class='list-group-item'><strong>Post ${i + 1}: </strong><em>"${post.data.title}"</em> (/u/${post.data.author}) <a href='${post.data.url}' class='badge badge-info' target="_blank">link to post</a></li>`)).join('');
  ul.innerHTML = content;
const subscribers = posts.map(post => post.data.subreddit_subscribers);
console.log(subscribers);

}

// passes selected sub to fetchTopFive()
function selectSub() {
  fetchTopFive(this.value);
}



select.addEventListener('change', selectSub);


//filter listeners
//trying to find a way to apply filters to json after it's already on the page--difficult


//fetchTopFive('javascript');


</script>
</body>
</html>